rmarkdown::render_site()
---
title: "GV300 Showcase: A/B Testing in Political Communication"
# Sample size
n <- 1500
# Random treatment assignment
treatment <- rbinom(n, 1, 0.5)
# Potential outcomes
p_control <- 0.12
p_treated <- 0.17
Y0 <- rbinom(n, 1, p_control)
Y1 <- rbinom(n, 1, p_treated)
# Realised outcome
support_signup <- ifelse(treatment == 1, Y1, Y0)
party_ab <- data.frame(
treatment = treatment,
support_signup = support_signup
)
mean_control <- mean(party_ab$support_signup[party_ab$treatment == 0])
mean_treated <- mean(party_ab$support_signup[party_ab$treatment == 1])
ate_hat <- mean_treated - mean_control
ate_hat
library(ggplot2)
means_df <- data.frame(
treatment = c("Control", "Issue-Focused"),
mean_signup = c(mean_control, mean_treated)
)
ggplot(means_df, aes(x = treatment, y = mean_signup, fill = treatment)) +
geom_col(width = 0.6) +
scale_y_continuous(labels = scales::percent_format()) +
labs(
title = "Supporter Signup Rate by Homepage Version",
x = NULL,
y = "Signup Rate"
) +
theme_minimal() +
theme(legend.position = "none")
# Load required libraries
library(ggplot2)
library(dplyr)
# Set seed for reproducibility
set.seed(7263)
# 1. Sample size
n <- 1500
# 2. Random treatment assignment (50/50 split)
treatment <- rbinom(n = n, size = 1, prob = 0.5)
# 3. Define potential outcomes
p_control <- 0.12      # Baseline signup probability
p_treated <- 0.17      # Treatment increases by 5 percentage points
Y0 <- rbinom(n = n, size = 1, prob = p_control)  # Outcome under control
Y1 <- rbinom(n = n, size = 1, prob = p_treated)  # Outcome under treatment
# 4. Realised outcome (depends on actual treatment received)
support_signup <- ifelse(treatment == 1, Y1, Y0)
# 5. Create data frame
party_ab <- data.frame(
visitor_id = 1:n,
treatment = treatment,
support_signup = support_signup
)
# Display first few rows
head(party_ab)
# Summary statistics
summary(party_ab)
# Check treatment balance
table(party_ab$treatment)
prop.table(table(party_ab$treatment))
# Signup rates by group
aggregate(support_signup ~ treatment, data = party_ab, mean)
# Calculate group means and standard errors
group_summary <- party_ab %>%
group_by(treatment) %>%
summarise(
mean_signup = mean(support_signup),
se = sqrt(mean_signup * (1 - mean_signup) / n()),
.groups = "drop"
) %>%
mutate(
treatment_label = ifelse(treatment == 0, "Control", "Issue-focused"),
ci_lower = mean_signup - 1.96 * se,
ci_upper = mean_signup + 1.96 * se
)
# Create the plot
ggplot(group_summary, aes(x = treatment_label, y = mean_signup, fill = treatment_label)) +
geom_col(width = 0.6, alpha = 0.85) +
geom_errorbar(
aes(ymin = ci_lower, ymax = ci_upper),
width = 0.15,
linewidth = 0.8
) +
geom_text(
aes(label = paste0(round(mean_signup * 100, 1), "%")),
vjust = -0.7,
size = 5
) +
scale_y_continuous(
limits = c(0, 0.25),
labels = scales::percent_format(accuracy = 1),
expand = expansion(mult = c(0, 0.05))
) +
scale_fill_manual(values = c("Control" = "gray70", "Issue-focused" = "steelblue")) +
labs(
x = NULL,
y = "Supporter signup rate",
title = "Issue-focused homepage increases signups by ~4 percentage points",
subtitle = "Bars show mean signup rates with 95% confidence intervals (n = 1,500 visitors)"
) +
theme_minimal(base_size = 13) +
theme(
legend.position = "none",
plot.title = element_text(face = "bold", size = 14),
plot.subtitle = element_text(size = 11, color = "gray30")
)
# 1. Difference-in-means (ATE)
mean_control <- mean(party_ab$support_signup[party_ab$treatment == 0])
mean_treated <- mean(party_ab$support_signup[party_ab$treatment == 1])
ate_diff <- mean_treated - mean_control
# 2. Linear Probability Model
lm_model <- lm(support_signup ~ treatment, data = party_ab)
# 3. Logistic Regression
logit_model <- glm(support_signup ~ treatment,
data = party_ab,
family = binomial(link = "logit"))
# Predicted probabilities from logit
p_control_logit <- predict(logit_model,
newdata = data.frame(treatment = 0),
type = "response")
p_treated_logit <- predict(logit_model,
newdata = data.frame(treatment = 1),
type = "response")
ate_logit <- p_treated_logit - p_control_logit
# Display results
results <- data.frame(
Method = c("Difference-in-means", "Linear Probability Model", "Logistic Regression"),
ATE = c(ate_diff, coef(lm_model)["treatment"], ate_logit)
)
print(results)
rmarkdown::render_site()
rmarkdown::render_site()
rmarkdown::render_site()
rmarkdown::render_site()
rmarkdown::render_site()
rmarkdown::render_site()
rmarkdown::render_site()
file.create(".nojekyll")
rmarkdown::render_site()
rmarkdown::render_site()
rmarkdown::render_site()
rmarkdown::render_site()
